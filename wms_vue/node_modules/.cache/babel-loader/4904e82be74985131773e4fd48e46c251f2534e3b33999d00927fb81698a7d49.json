{"ast":null,"code":"export default {\n  data() {\n    return {\n      active: 0,\n      user: JSON.parse(localStorage.getItem('user') || '{}'),\n      ruleForm: {\n        pname: '',\n        type: '',\n        // deposityOld:this.user.deposity,\n        deposityOld: '',\n        deposityNew: '',\n        quantity: '',\n        price: '',\n        state: '待审核',\n        // applyId:this.user.userid,\n        applyId: '',\n        applyTime: '',\n        applyRemark: '',\n        reviewId: '',\n        stockid: '',\n        picture: ''\n      },\n      rules: {\n        pname: [{\n          required: true,\n          message: '请输入产品名称',\n          trigger: 'blur'\n        }],\n        stockid: [{\n          required: true,\n          message: '请输入产品编号',\n          trigger: 'blur'\n        }],\n        quantity: [{\n          required: true,\n          message: '请输入产品数量',\n          trigger: 'blur'\n        }, {\n          validator: (rule, value, callback) => {\n            if (typeof value !== 'number' || isNaN(value)) {\n              callback(new Error('必须输入数字'));\n            } else if (value < 0) {\n              callback(new Error('数量不能为负数'));\n            } else {\n              callback();\n            }\n          },\n          trigger: ['blur']\n        }],\n        price: [{\n          required: true,\n          message: '请输入产品价格',\n          trigger: 'blur'\n        }, {\n          validator: (rule, value, callback) => {\n            if (typeof value !== 'number' || isNaN(value)) {\n              callback(new Error('必须输入数字'));\n            } else if (value < 0) {\n              callback(new Error('价格不能为负数'));\n            } else {\n              callback();\n            }\n          },\n          trigger: ['blur']\n        }],\n        // deposityNew: [\n        //   { required: true, message: '请选择仓库', trigger: 'change' }\n        // ],\n        type: [{\n          required: true,\n          message: '请选择操作类型',\n          trigger: 'change'\n        }],\n        reviewId: [{\n          required: true,\n          message: '请选择审核人',\n          trigger: 'change'\n        }]\n      }\n    };\n  },\n  components: {},\n  methods: {\n    handleAvatarSuccess(response) {\n      this.ruleForm.picture = response.data;\n      console.log(response.data);\n    },\n    next() {\n      this.active = 1;\n    },\n    apply() {\n      this.$refs.ruleForm.validate(valid => {\n        this.ruleForm.applyId = this.user.userid;\n        // if(this.ruleForm.type=='进货单'){\n        //   this.ruleForm.deposityNew=this.user.deposity;\n        // }else{\n        //   this.ruleForm.deposityOld=this.user.deposity;\n        // }\n\n        console.log(this.ruleForm);\n        if (valid) {\n          this.$request.post('/recordIn/add', this.ruleForm).then(res => {\n            console.log(res);\n            if (res.code === 0) {\n              this.$message.success(\"提交成功\");\n              this.active = 1;\n            } else {\n              this.$message.error(res.msg);\n            }\n          });\n        }\n      });\n    },\n    resetForm(formName) {\n      this.$refs[formName].resetFields();\n    }\n  }\n};","map":{"version":3,"names":["data","active","user","JSON","parse","localStorage","getItem","ruleForm","pname","type","deposityOld","deposityNew","quantity","price","state","applyId","applyTime","applyRemark","reviewId","stockid","picture","rules","required","message","trigger","validator","rule","value","callback","isNaN","Error","components","methods","handleAvatarSuccess","response","console","log","next","apply","$refs","validate","valid","userid","$request","post","then","res","code","$message","success","error","msg","resetForm","formName","resetFields"],"sources":["src/components/apply/in_apply.vue"],"sourcesContent":["<template>\r\n <div style=\"margin-top: 20px;\">\r\n\r\n<el-steps :active=\"active\" finish-status=\"success\" align-center>\r\n  <el-step title=\"申请提交\"></el-step>\r\n  <el-step title=\"审核中\"></el-step>\r\n  <!-- <el-step title=\"已完成\"></el-step> -->\r\n</el-steps>\r\n\r\n<!-- 表单区域 -->\r\n<el-form :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\" label-width=\"100px\" class=\"demo-ruleForm\" size=\"small\" style=\"width:600px\">\r\n  <el-form-item label=\"产品名称\" prop=\"pname\">\r\n    <el-input v-model=\"ruleForm.pname\"></el-input>\r\n  </el-form-item>\r\n  <el-form-item label=\"产品图片\" prop=\"picture\" style=\"text-align:left\"> \r\n          <el-upload\r\n            class=\"picture-uploader\"\r\n            action=\"http://localhost:9000/file/upload\"\r\n            :headers=\"{ token:user.token }\"\r\n            :file-list=\"ruleForm.picture ? [ruleForm.picture] : []\"\r\n            list-type=\"picture\"\r\n            :on-success=\"handleAvatarSuccess\">\r\n            <el-button type=\"primary\">上传图片</el-button>\r\n          </el-upload>\r\n  </el-form-item>\r\n  <el-form-item label=\"操作类型\" prop=\"type\">\r\n    <el-radio-group v-model=\"ruleForm.type\">\r\n      <el-radio label=\"出货单\"></el-radio>\r\n      <el-radio label=\"进货单\"></el-radio>\r\n      <el-radio label=\"调货单\"></el-radio>\r\n    </el-radio-group>\r\n  </el-form-item>\r\n  <!-- <el-form-item label=\"产品编号\" prop=\"stockid\">\r\n    <el-input v-model=\"ruleForm.stockid\"></el-input>\r\n  </el-form-item> -->\r\n  <el-form-item label=\"产品数量\" prop=\"quantity\">\r\n    <el-input v-model.number=\"ruleForm.quantity\" type=\"number\" min=\"0\"></el-input>\r\n  </el-form-item>\r\n  <el-form-item label=\"产品价格\" prop=\"price\">\r\n    <el-input v-model.number=\"ruleForm.price\" ></el-input>\r\n  </el-form-item>\r\n  \r\n  <el-form-item label=\"原仓库\" prop=\"deposityOld\" >\r\n    <el-select v-model=\"ruleForm.deposityOld\" placeholder=\"请选择仓库名称\" clearable>\r\n      <el-option v-for=\"item in ['1号仓库','2号仓库','3号仓库','4号仓库','5号仓库']\" :key=\"item\" :label=\"item\" :value=\"item\"></el-option>\r\n    </el-select>\r\n  </el-form-item>\r\n  <el-form-item label=\"现仓库\" prop=\"deposityNew\">\r\n    <el-select v-model=\"ruleForm.deposityNew\" placeholder=\"请选择仓库名称\" clearable>\r\n      <el-option v-for=\"item in ['1号仓库','2号仓库','3号仓库','4号仓库','5号仓库']\" :key=\"item\" :label=\"item\" :value=\"item\"></el-option>\r\n    </el-select>\r\n  </el-form-item>\r\n    <el-form-item label=\"审核人\" prop=\"reviewId\">\r\n    <el-select v-model=\"ruleForm.reviewId\" placeholder=\"请选择审核人\">\r\n      <el-option v-for=\"item in ['2001','2002','2003','7933']\" :key=\"item\" :label=\"item\" :value=\"item\"></el-option>\r\n    </el-select>\r\n  </el-form-item>\r\n  <el-form-item label=\"申请备注\" >\r\n    <el-input type=\"textarea\" v-model=\"ruleForm.applyRemark\"></el-input>\r\n  </el-form-item>\r\n  <el-form-item>\r\n    <el-button type=\"primary\" @click=\"apply\">提交申请</el-button>\r\n    <el-button @click=\"resetForm('ruleForm')\">重置</el-button>\r\n  </el-form-item>\r\n</el-form>\r\n\r\n\r\n\r\n<!-- <el-button style=\"margin-top: 12px;\" @click=\"next\">提交申请</el-button> -->\r\n\r\n </div>\r\n</template>\r\n\r\n<script>\r\n\r\n export default {\r\n    \r\n    data () {\r\n       return {\r\n        active: 0,\r\n        user:JSON.parse(localStorage.getItem('user') || '{}'),\r\n        ruleForm: {\r\n          pname: '',\r\n          type: '',\r\n          // deposityOld:this.user.deposity,\r\n          deposityOld:'',\r\n          deposityNew: '',\r\n          quantity: '',\r\n          price: '',\r\n          state:'待审核',\r\n          // applyId:this.user.userid,\r\n          applyId:'',\r\n          applyTime: '',\r\n          applyRemark: '',\r\n          reviewId: '',\r\n          stockid: '',\r\n          picture: '',\r\n        },\r\n        rules: {\r\n          pname: [\r\n            { required: true, message: '请输入产品名称', trigger: 'blur' }, \r\n        ],\r\n        stockid: [\r\n            { required: true, message: '请输入产品编号', trigger: 'blur' }, \r\n        ],\r\n          quantity:[\r\n            { required: true, message: '请输入产品数量', trigger: 'blur' },\r\n            { validator: (rule, value, callback) => {\r\n                if (typeof value !== 'number' || isNaN(value)) {\r\n                    callback(new Error('必须输入数字'));\r\n                } else if (value < 0) {\r\n                    callback(new Error('数量不能为负数'));\r\n                } else {\r\n                    callback();\r\n                }\r\n              },\r\n            trigger: ['blur'] }\r\n          ],\r\n          price:[\r\n            { required: true, message: '请输入产品价格', trigger: 'blur' },\r\n            { validator: (rule, value, callback) => {\r\n                if (typeof value !== 'number' || isNaN(value)) {\r\n                    callback(new Error('必须输入数字'));\r\n                } else if (value < 0) {\r\n                    callback(new Error('价格不能为负数'));\r\n                } else {\r\n                    callback();\r\n                }\r\n              },\r\n            trigger: ['blur'] }\r\n          ],    \r\n          // deposityNew: [\r\n          //   { required: true, message: '请选择仓库', trigger: 'change' }\r\n          // ],\r\n          type: [\r\n            { required: true, message: '请选择操作类型', trigger: 'change' }\r\n          ],\r\n          reviewId: [ \r\n            { required: true, message: '请选择审核人', trigger: 'change' }\r\n          ],\r\n        }\r\n\r\n       }\r\n    },\r\n    components: {\r\n        \r\n\r\n    },\r\n    methods: { \r\n      handleAvatarSuccess(response){\r\n        this.ruleForm.picture = response.data\r\n        console.log(response.data)\r\n\r\n      },\r\n        next() {\r\n            this.active=1;\r\n        },\r\n        apply(){\r\n         this.$refs.ruleForm.validate((valid) => {\r\n          this.ruleForm.applyId=this.user.userid;\r\n          // if(this.ruleForm.type=='进货单'){\r\n          //   this.ruleForm.deposityNew=this.user.deposity;\r\n          // }else{\r\n          //   this.ruleForm.deposityOld=this.user.deposity;\r\n          // }\r\n\r\n          console.log(this.ruleForm)\r\n                if(valid){\r\n                    this.$request.post('/recordIn/add',this.ruleForm).then(res => {\r\n                      console.log(res)\r\n                      if(res.code===0)\r\n                      {\r\n                        this.$message.success(\"提交成功\");\r\n                        this.active=1;\r\n                      }else{\r\n                        this.$message.error(res.msg);\r\n                      }\r\n                    })\r\n                }\r\n            })\r\n\r\n        },\r\n        resetForm(formName) {\r\n            this.$refs[formName].resetFields();\r\n        }\r\n    }\r\n }\r\n</script>\r\n\r\n<style scoped>\r\n.demo-ruleForm{\r\n    margin: 0 auto;        /* 水平居中 */\r\n    padding: 20px;\r\n    margin-top:40px\r\n}\r\n\r\n.el-form-item {\r\n  margin-bottom: 22px; /* 默认是 18px，增加间距 */\r\n  text-align: left;\r\n}\r\n \r\n</style>\r\n"],"mappings":"AA2EA;EAEAA,KAAA;IACA;MACAC,MAAA;MACAC,IAAA,EAAAC,IAAA,CAAAC,KAAA,CAAAC,YAAA,CAAAC,OAAA;MACAC,QAAA;QACAC,KAAA;QACAC,IAAA;QACA;QACAC,WAAA;QACAC,WAAA;QACAC,QAAA;QACAC,KAAA;QACAC,KAAA;QACA;QACAC,OAAA;QACAC,SAAA;QACAC,WAAA;QACAC,QAAA;QACAC,OAAA;QACAC,OAAA;MACA;MACAC,KAAA;QACAb,KAAA,GACA;UAAAc,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACAL,OAAA,GACA;UAAAG,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACAZ,QAAA,GACA;UAAAU,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,GACA;UAAAC,SAAA,EAAAA,CAAAC,IAAA,EAAAC,KAAA,EAAAC,QAAA;YACA,WAAAD,KAAA,iBAAAE,KAAA,CAAAF,KAAA;cACAC,QAAA,KAAAE,KAAA;YACA,WAAAH,KAAA;cACAC,QAAA,KAAAE,KAAA;YACA;cACAF,QAAA;YACA;UACA;UACAJ,OAAA;QAAA,EACA;QACAX,KAAA,GACA;UAAAS,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,GACA;UAAAC,SAAA,EAAAA,CAAAC,IAAA,EAAAC,KAAA,EAAAC,QAAA;YACA,WAAAD,KAAA,iBAAAE,KAAA,CAAAF,KAAA;cACAC,QAAA,KAAAE,KAAA;YACA,WAAAH,KAAA;cACAC,QAAA,KAAAE,KAAA;YACA;cACAF,QAAA;YACA;UACA;UACAJ,OAAA;QAAA,EACA;QACA;QACA;QACA;QACAf,IAAA,GACA;UAAAa,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACAN,QAAA,GACA;UAAAI,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MAEA;IAEA;EACA;EACAO,UAAA,GAGA;EACAC,OAAA;IACAC,oBAAAC,QAAA;MACA,KAAA3B,QAAA,CAAAa,OAAA,GAAAc,QAAA,CAAAlC,IAAA;MACAmC,OAAA,CAAAC,GAAA,CAAAF,QAAA,CAAAlC,IAAA;IAEA;IACAqC,KAAA;MACA,KAAApC,MAAA;IACA;IACAqC,MAAA;MACA,KAAAC,KAAA,CAAAhC,QAAA,CAAAiC,QAAA,CAAAC,KAAA;QACA,KAAAlC,QAAA,CAAAQ,OAAA,QAAAb,IAAA,CAAAwC,MAAA;QACA;QACA;QACA;QACA;QACA;;QAEAP,OAAA,CAAAC,GAAA,MAAA7B,QAAA;QACA,IAAAkC,KAAA;UACA,KAAAE,QAAA,CAAAC,IAAA,uBAAArC,QAAA,EAAAsC,IAAA,CAAAC,GAAA;YACAX,OAAA,CAAAC,GAAA,CAAAU,GAAA;YACA,IAAAA,GAAA,CAAAC,IAAA,QACA;cACA,KAAAC,QAAA,CAAAC,OAAA;cACA,KAAAhD,MAAA;YACA;cACA,KAAA+C,QAAA,CAAAE,KAAA,CAAAJ,GAAA,CAAAK,GAAA;YACA;UACA;QACA;MACA;IAEA;IACAC,UAAAC,QAAA;MACA,KAAAd,KAAA,CAAAc,QAAA,EAAAC,WAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}