{"ast":null,"code":"import request from '@/request/request';\nexport default {\n  name: 'app',\n  data() {\n    return {\n      pendings: [],\n      completeds: [],\n      rejecteds: [],\n      completedFormVisible: false,\n      pendingFormVisible: false,\n      rejectedFormVisible: false,\n      ruleForm: {\n        pname: '',\n        type: '',\n        deposityOld: '',\n        deposityNew: '',\n        quantity: '',\n        price: '',\n        state: '待审核',\n        applyId: '',\n        applyTime: '',\n        applyRemark: '',\n        reviewId: '',\n        reviewRemark: '',\n        picture: ''\n      }\n    };\n  },\n  components: {},\n  mounted() {\n    this.loadpendings();\n    this.loadcompleteds();\n    this.loadrejecteds();\n  },\n  methods: {\n    agree() {\n      request.post('/recordIn/pendingAgree', this.ruleForm).then(res => {\n        if (res.code == 0) {\n          this.$message.success(\"申请已通过\");\n          this.pendingFormVisible = false;\n          this.loadpendings();\n          this.loadcompleteds();\n          this.loadrejecteds();\n        }\n      });\n    },\n    reject() {\n      console.log(\"当前卡片的数据：\", this.ruleForm);\n      request.post('/recordIn/pendingReject', this.ruleForm).then(res => {\n        if (res.code == 0) {\n          this.$message.success(\"申请已驳回\");\n          console.log(\"当前卡片的数据2：\", this.ruleForm);\n          this.pendingFormVisible = false;\n          this.loadpendings();\n          this.loadcompleteds();\n          this.loadrejecteds();\n        }\n      });\n    },\n    loadpendings() {\n      request.get('/recordIn/allPendingData').then(res => {\n        if (res.code == 0) {\n          this.pendings = res.data;\n        }\n      });\n    },\n    loadcompleteds() {\n      request.get('/recordIn/allCompletedData').then(res => {\n        if (res.code == 0) {\n          this.completeds = res.data;\n        }\n      });\n    },\n    loadrejecteds() {\n      request.get('/recordIn/allRejectedData').then(res => {\n        if (res.code == 0) {\n          this.rejecteds = res.data;\n        }\n      });\n    },\n    completedDetail(completed) {\n      //编辑\n      console.log(\"当前卡片的数据：\", completed);\n      this.ruleForm = completed;\n      this.completedFormVisible = true;\n    },\n    pendingDetail(pending) {\n      //编辑\n      console.log(\"当前卡片的数据：\", pending);\n      this.ruleForm = pending;\n      this.pendingFormVisible = true;\n    },\n    rejectedDetail(rejected) {\n      //编辑\n      console.log(\"当前卡片的数据：\", rejected);\n      this.ruleForm = rejected;\n      this.rejectedFormVisible = true;\n    }\n  }\n};","map":{"version":3,"names":["request","name","data","pendings","completeds","rejecteds","completedFormVisible","pendingFormVisible","rejectedFormVisible","ruleForm","pname","type","deposityOld","deposityNew","quantity","price","state","applyId","applyTime","applyRemark","reviewId","reviewRemark","picture","components","mounted","loadpendings","loadcompleteds","loadrejecteds","methods","agree","post","then","res","code","$message","success","reject","console","log","get","completedDetail","completed","pendingDetail","pending","rejectedDetail","rejected"],"sources":["src/components/application/mypending.vue"],"sourcesContent":["<template>\r\n <div style=\"display:flex ;flex-direction:column\">\r\n\r\n    <div style=\"margin-top:20px\">\r\n        <div style=\"margin-bottom:20px ;font-size:20px;text-align:left\">待审核申请（{{ pendings.length }}）</div>\r\n        <el-row :gutter=\"20\">\r\n            <el-col v-for=\"pending in pendings\" :key=\"pending.recordId\" :xs=\"24\" :sm=\"12\" :md=\"8\" :lg=\"6\">\r\n                <el-card class=\"pending-card\" shadow=\"hover\" style=\"text-align:left\">\r\n                    <!-- 卡片头部 -->\r\n                    <div slot=\"header\" class=\"card-header\">\r\n                    <span>{{ pending.applyId }}的申请</span>\r\n                    <el-button type=\"warning\" size=\"mini\" effect=\"dark\" style=\"float:right\" @click=\"pendingDetail(pending)\">待审核</el-button>\r\n                    </div>\r\n                    <!-- 申请内容 -->\r\n                    <div>\r\n                        <div>申请类型：{{ pending.type }}</div>\r\n                        <div>变动产品：{{pending.pname}}</div>\r\n                        <div>产品去向：{{pending.deposityOld}}————{{pending.deposityNew}}</div>\r\n                        <div>申请时间：{{ pending.applyTime }}</div>\r\n                    </div>\r\n                </el-card>\r\n            </el-col>\r\n        </el-row>\r\n    </div>\r\n\r\n    <div style=\"margin-top:20px\">\r\n        <div style=\"margin-bottom:20px;font-size:20px;text-align:left\">近10条完成申请</div>\r\n        <el-row :gutter=\"20\">\r\n            <el-col v-for=\"completed in completeds\" :key=\"completed.recordId\" :xs=\"24\" :sm=\"12\" :md=\"8\" :lg=\"6\">\r\n                <el-card class=\"completed-card\" shadow=\"hover\" style=\"text-align:left\">\r\n                    <!-- 卡片头部 -->\r\n                    <div slot=\"header\" class=\"card-header\">\r\n                    <span>{{ completed.applyId }}的申请</span>\r\n                    <el-button type=\"success\" size=\"mini\" effect=\"dark\" style=\"float:right\" @click=\"completedDetail(completed)\">已完成</el-button>\r\n                    </div>\r\n                    <!-- 申请内容 -->\r\n                    <div>\r\n                        <div>申请类型：{{completed.type }}</div>\r\n                        <div>变动产品：{{completed.pname}}</div>\r\n                        <div>产品去向：{{completed.deposityOld}}————{{completed.deposityNew}}</div>\r\n                        <div>申请时间：{{completed.applyTime }}</div>\r\n                        <div>审核时间：{{completed.reviewTime }}</div>\r\n                    </div>\r\n                </el-card>\r\n            </el-col>\r\n        </el-row>\r\n    </div>\r\n\r\n\r\n    <div style=\"margin-top:20px\">\r\n        <div style=\"margin-bottom:20px;font-size:20px;text-align:left\">近10条已驳回申请</div>\r\n        <el-row :gutter=\"20\">\r\n            <el-col v-for=\"rejected in rejecteds\" :key=\"rejected.recordId\" :xs=\"24\" :sm=\"12\" :md=\"8\" :lg=\"6\">\r\n                <el-card class=\"rejected-card\" shadow=\"hover\" style=\"text-align:left\">\r\n                    <!-- 卡片头部 -->\r\n                    <div slot=\"header\" class=\"card-header\">\r\n                    <span>{{ rejected.applyId }}的申请</span>\r\n                    <el-button type=\"danger\" size=\"mini\" effect=\"dark\" style=\"float:right\" @click=\"rejectedDetail(rejected)\">已驳回</el-button>\r\n                    </div>\r\n                    <!-- 申请内容 -->\r\n                    <div>\r\n                        <div>申请类型：{{rejected.type }}</div>\r\n                        <div>变动产品：{{rejected.pname}}</div>\r\n                        <div>产品去向：{{rejected.deposityOld}}————{{rejected.deposityNew}}</div>\r\n                        <div>申请时间：{{rejected.applyTime }}</div>\r\n                        <div>审核时间：{{rejected.reviewTime }}</div>\r\n                    </div>\r\n                </el-card>\r\n            </el-col>\r\n        </el-row>\r\n    </div>\r\n\r\n<!-- 已完成弹出框 -->\r\n<el-dialog title=\"申请详情\" :visible.sync=\"pendingFormVisible\" width=\"30%\">\r\n<el-form :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\" label-width=\"100px\" class=\"demo-ruleForm\" size=\"small\" >\r\n  <div style=\"margin:25px ; text-align:center;justify-content:center;display:flex\" >\r\n          <img v-if=\"ruleForm.picture\" :src=\"ruleForm.picture\" class=\"avatar\">\r\n          <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n  </div>\r\n  <el-form-item label=\"产品名称\">\r\n    <el-input v-model=\"ruleForm.pname\" disabled></el-input>\r\n  </el-form-item>\r\n  <el-form-item label=\"产品数量\">\r\n    <el-input v-model.number=\"ruleForm.quantity\" type=\"number\" min=\"0\" disabled></el-input>\r\n  </el-form-item>\r\n  <el-form-item label=\"产品价格\">\r\n    <el-input v-model.number=\"ruleForm.price\" disabled></el-input>\r\n  </el-form-item>\r\n  <el-form-item label=\"仓库\">\r\n    <el-select v-model=\"ruleForm.deposityNew\" placeholder=\"请选择仓库名称\" style=\"width:100%\" disabled>\r\n      <el-option v-for=\"item in ['1号仓库','2号仓库','3号仓库']\" :key=\"item\" :label=\"item\" :value=\"item\"></el-option>\r\n    </el-select>\r\n  </el-form-item>\r\n  <el-form-item label=\"操作类型\">\r\n    <el-radio-group v-model=\"ruleForm.type\" disabled>\r\n      <el-radio label=\"出货单\"></el-radio>\r\n      <el-radio label=\"进货单\"></el-radio>\r\n      <el-radio label=\"调货单\"></el-radio>\r\n    </el-radio-group>\r\n  </el-form-item>\r\n    <el-form-item label=\"审核人\">\r\n    <el-select v-model=\"ruleForm.reviewId\" placeholder=\"请选择审核人\" style=\"width:100%\" disabled>\r\n      <el-option v-for=\"item in ['111','222','333']\" :key=\"item\" :label=\"item\" :value=\"item\"></el-option>\r\n    </el-select>\r\n  </el-form-item>\r\n  <el-form-item label=\"申请备注\" >\r\n    <el-input type=\"textarea\" v-model=\"ruleForm.applyRemark\" disabled></el-input>\r\n  </el-form-item>\r\n  <el-form-item label=\"审核意见\" >\r\n    <el-input type=\"textarea\" v-model=\"ruleForm.reviewRemark\" ></el-input>\r\n  </el-form-item>\r\n</el-form>\r\n    <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"pendingFormVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"agree\">同 意</el-button>\r\n        <el-button type=\"danger\" @click=\"reject\">驳 回</el-button>\r\n        \r\n    </div>\r\n</el-dialog>\r\n\r\n<!-- 已完成弹出框 -->\r\n<el-dialog title=\"申请详情\" :visible.sync=\"completedFormVisible\" width=\"30%\">\r\n<el-form :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\" label-width=\"100px\" class=\"demo-ruleForm\" size=\"small\" >\r\n  <div style=\"margin:25px ; text-align:center;justify-content:center;display:flex\" >\r\n          <img v-if=\"ruleForm.picture\" :src=\"ruleForm.picture\" class=\"avatar\">\r\n          <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n  </div>\r\n  <el-form-item label=\"产品名称\">\r\n    <el-input v-model=\"ruleForm.pname\" disabled></el-input>\r\n  </el-form-item>\r\n  <el-form-item label=\"产品数量\">\r\n    <el-input v-model.number=\"ruleForm.quantity\" type=\"number\" min=\"0\" disabled></el-input>\r\n  </el-form-item>\r\n  <el-form-item label=\"产品价格\">\r\n    <el-input v-model.number=\"ruleForm.price\" disabled></el-input>\r\n  </el-form-item>\r\n  <el-form-item label=\"原仓库\">\r\n    <el-input v-model=\"ruleForm.deposityOld\" disabled></el-input>\r\n  </el-form-item>\r\n  <el-form-item label=\"新仓库\">\r\n    <el-input v-model=\"ruleForm.deposityNew\" disabled></el-input>\r\n  </el-form-item>\r\n  <el-form-item label=\"操作类型\">\r\n    <el-radio-group v-model=\"ruleForm.type\" disabled>\r\n      <el-radio label=\"出货单\"></el-radio>\r\n      <el-radio label=\"进货单\"></el-radio>\r\n      <el-radio label=\"调货单\"></el-radio>\r\n    </el-radio-group>\r\n  </el-form-item>\r\n    <el-form-item label=\"审核人\">\r\n    <el-select v-model=\"ruleForm.reviewId\" placeholder=\"请选择审核人\" style=\"width:100%\" disabled>\r\n      <el-option v-for=\"item in ['111','222','333']\" :key=\"item\" :label=\"item\" :value=\"item\"></el-option>\r\n    </el-select>\r\n  </el-form-item>\r\n  <el-form-item label=\"申请备注\" >\r\n    <el-input type=\"textarea\" v-model=\"ruleForm.applyRemark\" disabled></el-input>\r\n  </el-form-item>\r\n  <el-form-item label=\"审核意见\" >\r\n    <el-input type=\"textarea\" v-model=\"ruleForm.reviewRemark\" disabled></el-input>\r\n  </el-form-item>\r\n</el-form>\r\n    <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"completedFormVisible = false\">取 消</el-button>\r\n    </div>\r\n</el-dialog>\r\n\r\n\r\n<!-- 已驳回弹出框 -->\r\n<el-dialog title=\"申请详情\" :visible.sync=\"rejectedFormVisible\" width=\"30%\">\r\n<el-form :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\" label-width=\"100px\" class=\"demo-ruleForm\" size=\"small\" >\r\n  <div style=\"margin:25px ; text-align:center;justify-content:center;display:flex\" >\r\n          <img v-if=\"ruleForm.picture\" :src=\"ruleForm.picture\" class=\"avatar\">\r\n          <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n  </div>\r\n  <el-form-item label=\"产品名称\">\r\n    <el-input v-model=\"ruleForm.pname\" disabled></el-input>\r\n  </el-form-item>\r\n  <el-form-item label=\"产品数量\">\r\n    <el-input v-model.number=\"ruleForm.quantity\" type=\"number\" min=\"0\" disabled></el-input>\r\n  </el-form-item>\r\n  <el-form-item label=\"产品价格\">\r\n    <el-input v-model.number=\"ruleForm.price\" disabled></el-input>\r\n  </el-form-item>\r\n  <el-form-item label=\"原仓库\">\r\n    <el-input v-model=\"ruleForm.deposityOld\" disabled></el-input>\r\n  </el-form-item>\r\n  <el-form-item label=\"新仓库\">\r\n    <el-input v-model=\"ruleForm.deposityNew\" disabled></el-input>\r\n  </el-form-item>\r\n  <el-form-item label=\"操作类型\">\r\n    <el-radio-group v-model=\"ruleForm.type\" disabled>\r\n      <el-radio label=\"出货单\"></el-radio>\r\n      <el-radio label=\"进货单\"></el-radio>\r\n      <el-radio label=\"调货单\"></el-radio>\r\n    </el-radio-group>\r\n  </el-form-item>\r\n    <el-form-item label=\"审核人\">\r\n    <el-select v-model=\"ruleForm.reviewId\" placeholder=\"请选择审核人\" style=\"width:100%\" disabled>\r\n      <el-option v-for=\"item in ['111','222','333']\" :key=\"item\" :label=\"item\" :value=\"item\"></el-option>\r\n    </el-select>\r\n  </el-form-item>\r\n  <el-form-item label=\"申请备注\" >\r\n    <el-input type=\"textarea\" v-model=\"ruleForm.applyRemark\" disabled></el-input>\r\n  </el-form-item>\r\n  <el-form-item label=\"审核意见\" >\r\n    <el-input type=\"textarea\" v-model=\"ruleForm.reviewRemark\" disabled></el-input>\r\n  </el-form-item>\r\n</el-form>\r\n    <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"rejectedFormVisible = false\">取 消</el-button>\r\n    </div>\r\n</el-dialog>\r\n\r\n\r\n\r\n\r\n\r\n </div>\r\n</template>\r\n\r\n<script>\r\nimport request from '@/request/request'\r\n export default {\r\n    name:'app',\r\n    data () {\r\n       return {\r\n        pendings: [],\r\n        completeds: [],\r\n        rejecteds: [],\r\n        completedFormVisible:false,\r\n        pendingFormVisible:false,\r\n        rejectedFormVisible:false,\r\n        ruleForm: {\r\n          pname: '',\r\n          type: '',\r\n          deposityOld:'',\r\n          deposityNew: '',\r\n          quantity: '',\r\n          price: '',\r\n          state:'待审核',\r\n          applyId:'',\r\n          applyTime: '',\r\n          applyRemark: '',\r\n          reviewId: '',\r\n          reviewRemark: '',\r\n          picture: '',\r\n        },\r\n   \r\n\r\n       }\r\n    },\r\n    components: {\r\n\r\n    },\r\n    mounted () {\r\n        this.loadpendings();\r\n        this.loadcompleteds();\r\n        this.loadrejecteds();\r\n    },\r\n    methods: { \r\n      agree(){\r\n        request.post('/recordIn/pendingAgree',this.ruleForm).then(res =>{\r\n          if(res.code==0)\r\n          {\r\n            this.$message.success(\"申请已通过\");\r\n            this.pendingFormVisible=false\r\n            this.loadpendings();\r\n            this.loadcompleteds();\r\n            this.loadrejecteds();\r\n          }\r\n        })\r\n      },\r\n      reject(){\r\n        console.log(\"当前卡片的数据：\", this.ruleForm);\r\n        request.post('/recordIn/pendingReject',this.ruleForm).then(res =>{\r\n          if(res.code==0)\r\n          {\r\n            this.$message.success(\"申请已驳回\");\r\n            console.log(\"当前卡片的数据2：\", this.ruleForm);\r\n            this.pendingFormVisible=false\r\n            this.loadpendings();\r\n            this.loadcompleteds();\r\n            this.loadrejecteds();\r\n          }\r\n        })\r\n      },\r\n      loadpendings(){\r\n          request.get('/recordIn/allPendingData').then(res =>{\r\n          if(res.code==0)\r\n          {\r\n              this.pendings=res.data;\r\n          }\r\n      })\r\n      },\r\n      loadcompleteds(){\r\n          request.get('/recordIn/allCompletedData').then(res =>{\r\n          if(res.code==0)\r\n          {\r\n              this.completeds=res.data;\r\n          }\r\n      })\r\n      },\r\n      loadrejecteds(){\r\n          request.get('/recordIn/allRejectedData').then(res =>{\r\n          if(res.code==0)\r\n          {\r\n              this.rejecteds=res.data;\r\n          }\r\n      })\r\n      },\r\n      completedDetail(completed){//编辑\r\n          console.log(\"当前卡片的数据：\", completed);\r\n          this.ruleForm=completed;\r\n          this.completedFormVisible=true\r\n      },\r\n      pendingDetail(pending){//编辑\r\n          console.log(\"当前卡片的数据：\", pending);\r\n          this.ruleForm=pending;\r\n          this.pendingFormVisible=true\r\n      },\r\n      rejectedDetail(rejected){//编辑\r\n          console.log(\"当前卡片的数据：\", rejected);\r\n          this.ruleForm=rejected;\r\n          this.rejectedFormVisible=true\r\n      },\r\n\r\n\r\n    }\r\n }\r\n</script>\r\n\r\n<style scoped>\r\n::v-deep .avatar-uploader-icon {\r\n    font-size: 28px;\r\n    color: #8c939d;\r\n    width: 178px;\r\n    height: 178px;\r\n    line-height: 178px;\r\n    text-align: center;\r\n  }\r\n  \r\n   ::v-deep .avatar {\r\n    width: 178px;\r\n    height: 178px;\r\n    display: block;\r\n  }\r\n \r\n</style>\r\n\r\n"],"mappings":"AA6NA,OAAAA,OAAA;AACA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,QAAA;MACAC,UAAA;MACAC,SAAA;MACAC,oBAAA;MACAC,kBAAA;MACAC,mBAAA;MACAC,QAAA;QACAC,KAAA;QACAC,IAAA;QACAC,WAAA;QACAC,WAAA;QACAC,QAAA;QACAC,KAAA;QACAC,KAAA;QACAC,OAAA;QACAC,SAAA;QACAC,WAAA;QACAC,QAAA;QACAC,YAAA;QACAC,OAAA;MACA;IAGA;EACA;EACAC,UAAA,GAEA;EACAC,QAAA;IACA,KAAAC,YAAA;IACA,KAAAC,cAAA;IACA,KAAAC,aAAA;EACA;EACAC,OAAA;IACAC,MAAA;MACA7B,OAAA,CAAA8B,IAAA,gCAAArB,QAAA,EAAAsB,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA,OACA;UACA,KAAAC,QAAA,CAAAC,OAAA;UACA,KAAA5B,kBAAA;UACA,KAAAkB,YAAA;UACA,KAAAC,cAAA;UACA,KAAAC,aAAA;QACA;MACA;IACA;IACAS,OAAA;MACAC,OAAA,CAAAC,GAAA,kBAAA7B,QAAA;MACAT,OAAA,CAAA8B,IAAA,iCAAArB,QAAA,EAAAsB,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA,OACA;UACA,KAAAC,QAAA,CAAAC,OAAA;UACAE,OAAA,CAAAC,GAAA,mBAAA7B,QAAA;UACA,KAAAF,kBAAA;UACA,KAAAkB,YAAA;UACA,KAAAC,cAAA;UACA,KAAAC,aAAA;QACA;MACA;IACA;IACAF,aAAA;MACAzB,OAAA,CAAAuC,GAAA,6BAAAR,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA,OACA;UACA,KAAA9B,QAAA,GAAA6B,GAAA,CAAA9B,IAAA;QACA;MACA;IACA;IACAwB,eAAA;MACA1B,OAAA,CAAAuC,GAAA,+BAAAR,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA,OACA;UACA,KAAA7B,UAAA,GAAA4B,GAAA,CAAA9B,IAAA;QACA;MACA;IACA;IACAyB,cAAA;MACA3B,OAAA,CAAAuC,GAAA,8BAAAR,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA,OACA;UACA,KAAA5B,SAAA,GAAA2B,GAAA,CAAA9B,IAAA;QACA;MACA;IACA;IACAsC,gBAAAC,SAAA;MAAA;MACAJ,OAAA,CAAAC,GAAA,aAAAG,SAAA;MACA,KAAAhC,QAAA,GAAAgC,SAAA;MACA,KAAAnC,oBAAA;IACA;IACAoC,cAAAC,OAAA;MAAA;MACAN,OAAA,CAAAC,GAAA,aAAAK,OAAA;MACA,KAAAlC,QAAA,GAAAkC,OAAA;MACA,KAAApC,kBAAA;IACA;IACAqC,eAAAC,QAAA;MAAA;MACAR,OAAA,CAAAC,GAAA,aAAAO,QAAA;MACA,KAAApC,QAAA,GAAAoC,QAAA;MACA,KAAArC,mBAAA;IACA;EAGA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}